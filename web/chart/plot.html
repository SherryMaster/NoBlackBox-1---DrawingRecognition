<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom chart</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Custom chart</h1>
    <div id="chartContainer"></div>
    <table id="dataTable"></table>

    <script src="math.js"></script>

    <script>
        N = 1000
        samples = []

        for(let i=1; i<=N; i++){
            type = Math.random() < 0.5 ? "sport" : "classic"
            km = math.lerp(500, 500000, Math.random())
            price = math.remap(500, 500000, 100000, 1000, km) +
                math.lerp(-20000, 30000, Math.random()) +
                ((type === "sport") ? math.lerp(20000, 50000, Math.random()) : 0)
            if (price < 0) price = 0
            samples.push({
                id: i,
                label: type,
                point: [km, price]
            })
        }

        const options = {
            size:250,
            axisLabels:["Kilometres", "Price"],
            styles:{
                classic:'gray',
                sport:'blue'
            }
        }

        const chart = new Chart(
            chartContainer,
            samples,
            options
        )

        const header = dataTable.createTHead();
        const tr = header.insertRow();
        tr.insertCell().innerHTML = "ID";
        tr.insertCell().innerHTML = "Label";
        tr.insertCell().innerHTML = "KM";
        tr.insertCell().innerHTML = "Price";

        const body = dataTable.createTBody();
        for(let sample of samples){
            const tr = body.insertRow();

            tr.insertCell().innerHTML = sample.id;
            tr.insertCell().innerHTML = sample.label;
            tr.insertCell().innerHTML = math.formatNumber(sample.point[0]);
            tr.insertCell().innerHTML = math.formatNumber(sample.point[1]);
        }
    </script>
</body>
</html>